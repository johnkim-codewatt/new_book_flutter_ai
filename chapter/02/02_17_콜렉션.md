# 목록을 만들자, 리스트와 맵, 셋



![콜렉션](../../images/02_17_list.png)


>“세상에 우연히 연결된 것은 없다. 모든 연결에는 이유가 있다.” — 파울로 코엘료



앞서 배운 변수에는 숫자, 문자, true/false 와 같은 단일 타입의 값만 담을수 있었다. 하지만 현실세계의 복잡하고도 수많은 “것” 들을 프로그래밍세계에 녹여내려면 이와 같은 단일 값만으로는 한계가 있다. 그래서 이번장에서는 “바구니에 있는 과일들”, “영수증에 있는 카드사용내역” , “서재에 꼽혀있는 책들” , “사전에 들어있는 정보들” 이와 같은 현실의 많은 데이터들을 어떻게 프로그래밍 상에서 표시할수 있을지 고민해보자. 

## **리스트**
현실세계에 있는 순차적으로 나열된, 일련의 목록 데이터들을 프로그래밍 상에 표시하려면 어떻게 해야할까? 바로 리스트가 그 첫번째 방법이 될수 있다. 말 그대로 목록 형태의 데이터를 의미하며, 가장 흔하게 쓰이는 데이터 구조중 하나가 될 것이다. 우선 리스트를 만들기 위해서는 일정한 순서를 가지는 데이터가 필요하다. 아래의 데이터가 바로 리스트에 사용하기 적합한 데이터 예제 라고 볼수 있다.

- 도서관에서 대여한 책 목록
- 어제 과일가게에서 구매한 과일목록
- 지난번 중간고사 성적목록
- 이번달 카드결재 목록



간단하게 먼저 ‘책꽂이’ 를 프로그래밍상에서 리스트로 만들어 보자.

```dart
var bookshelf = ['삼국지', '해리포터', '영웅문', '반지의제왕'];
```

우리가 좋아하는 무협, 판타지 서적이 가득찬 책장이 완성되었다. 이 책장에는 사실 일련의 순서가 있는데, 눈에 보이지 않지만 왼쪽에서 0번 부터 시작해서 3번까지 번호가 매겨져 있다. 이제 부터 우리는 이와 같은 순서를 index(인덱스) 라고 부른다.

>**[팁&노트]**
프로그래밍에서 인덱스는 보통 0부터 시작한다. 컴퓨터가 메모리에서 데이터를 처리할 때, 첫 번째 값을 찾기 위해 0부터 세는 방식이 가장 빠르고 단순하기 때문이다. 또한 수학에서도 배열이나 순서를 0부터 세는 것이 일반적이어서, 대부분의 언어가 이를 따르고 있다.[^1]

그럼 이제 이 책장에서 책을 하나씩 꺼내보도록 하자. 방법은 간단하다. 


```dart
var book = bookshelf[0]; //책꽂이에 첫번째순서인 삼국지를 꺼내기 위해 인덱스 번호 0을 입력합니다.
```

```dart
print(book); //삼국지 출력
``` 



마치 bookshelf 라는 공간 안에 0번, 1번, 2번처럼 순서대로 방 번호가 붙어 있고, 그 문을 열면 각방에 들어있는 책을 꺼낼수 있다고 생각하면 이해하기 쉽다.

이번에는 우리가 만든 리스트에 책을 추가하거나 삭제하려면 어떻게 해야 할지 알아보자. 리스트는 추가, 삭제, 정렬과 같은 작업을 손쉽게 할 수 있도록 기본적으로 편리한 내장 함수들이 제공된다. 복잡한 코드를 직접 만들 필요 없이, 필요한 함수를 호출해서 사용하기만 하면 된다.

예제를 통해 add와 remove 함수를 통해 손쉽게 자료를 추가하고 삭제할수 있음을 확인해보자.

```dart
var bookshelf = ['삼국지', '해리포터', '영웅문', '반지의제왕'];
var book = bookshelf[0]; 
print(book); // 삼국지 이름 출력

bookshelf.add('호빗'); //호빗을 추가했다.
print(bookshelf); //"삼국지", "해리포터", "영웅문", "반지의제왕", "호빗"

bookshelf.remove('삼국지'); // 삼국지를 책장에서 꺼냈다.
print(bookshelf); //"해리포터", "영웅문", "반지의제왕", "호빗"

```

---

## 추가로 알아두세요!

### **주요 메서드활용**
이번에는 지난번 반복문에서 잠깐 소개했던 for-in과 forEach 문을 다시 사용해보자. 그때는 리스트에 대해 배우지 않아서 정확한 사용법이 낯설었을 수 있다. 하지만 이제 리스트를 배웠으니, 이 반복문들이 어떤 원리로 동작하는지 이해할 수 있을 것이다. for-in과 forEach는 리스트처럼 여러 값을 담고 있는 데이터를 간단하게 순회할 때 매우 유용한 문법이다.

```dart
var bookshelf = ['삼국지', '해리포터', '영웅문', '반지의제왕'];
for(var book in bookshelf){ // 간단하게 책장에 있는 책들을 순회할수 있다.
  print(book); //각각의 책을 출력한다.
	print(book);
}
```

for 문과 비교해보면 for-in이 훨씬 간단하다. 하지만 기본 형태의 for문은 index를 활용할 수 있다는 장점도 있다. 상황에 따라서 유연하게 작성되야 하는 이유이다.

```dart
var bookshelf = ['삼국지', '해리포터', '영웅문', '반지의제왕'];
for (var i = 0; i < bookshelf.length; i++) { // for in에 비해 다소 복잡하지만, 인덱스를 활용할 수 있다.
  print(bookshelf[i]);
}
```

forEach도 마찬가지이다. 굉장히 자주 사용되며 반복문 코드를 깔끔하고 명확하게 작성할수 있다. 

```dart
bookshelf.forEach((book) {
  print(book);
});
```

### **그밖에 내장함수들**

Dart의 List는 다양한 내장 함수들을 제공한다. 데이터를 추가, 삭제 이외에도 정렬, 검색, 변환하는 데 유용한 함수들이 기본으로 제공된다. 

**contains**
contains은 리스트에 특정 데이터가 존재하는지 빠르게 확인할 때 사용하면 유용하다.

```dart
var fruits = ['apple', 'banana', 'mango'];
print(fruits.contains('banana')); // banana가 리스트에 있는지 확인
print(fruits.contains('grape'));  // grape가 리스트에 있는지 확인
```

 
**indexOf**
리스트 안에서 특정 값이 몇 번째(index)에 있는지 찾고 싶을 때 유용하다.

```dart
var numbers = [10, 20, 30, 40]; // 리스트 정의
print(numbers.indexOf(30)); // 30 이 리스트에서 몇 번째에 있는지 출력
print(numbers.indexOf(100)); // 100이 리스트에 없으면 -1 출력
```

**sort**
숫자나 문자열을 정렬할 수 있다.

```dart
var scores = [88, 70, 99, 64]; // 리스트 정의
scores.sort(); // 오름차순 정렬
print(scores); // [64, 70, 88, 99]
```

**reversed**
때로는 리스트에 들어있는 목록을 뒤집어서 활용하고 싶을수 있다. 그럴때 사용하면 유용한 함수이다.

```dart
var names = ['홍길동', '김길동', '고길동'];
print(names.reversed.toList()); // [고길동, 김길동, 홍길동]
```

**map**
map은 리스트의 값을 순회하여, 각각의 값을 다른값으로 변환할때 사용된다.(일명 "맵핑하다" 라고 표현한다.)

```dart
void main() {
  var numbers = [1, 2, 3, 4, 5]; // 리스트 정의
  // 각 요소를 2배로 만들 새로운 리스트 생성
  var doubled = numbers.map((n) => n * 2).toList(); //n은 numbers 리스트에서 각각의 값이다.
  print(doubled); // 출력: [2, 4, 6, 8, 10]
}
```

---




## Map
현실에서 우리는 모르는 단어를 만나면 그 뜻을 찾아보기 위해 검색을 하거나, 사전을 찾아본다. 예를 들어 “코딩” 이라는 단어를 찾는다고 가정해보자. 사전을 펼치면 모르는 단어(key)를 기준으로 그 뜻(value)을 확인할 수 있게 된다. 이 구조가 이번에 배울 맵이라는 구조 그 자체이다. 

>**[팁&노트]**
map의 의미는 지리상의 ‘지도’가 아니라, 값을 서로 매핑(mapping) 한다는 의미로 이해하면 쉽게 이해가 된다. 즉, 어떤 key(키워드) 를 통해 특정 value(값)을 연결해서 찾는 구조이다.

이제 Dart에서 간단하게 책 정보를 담은 Map을 작성해보자.

```dart
var bookInfo = {
  '해리포터' : '옛날 옛날 한 마법학교에 해리포터라는 아이가 있었어요.', 
  '반지의제왕' : '호빗마을에 사는 프로도라는 아이가 있었어요.', 
  '호빗' : '호빗은 용감한 모험을 떠나는 이야기입니다.', 
  '삼국지' : '삼국시대의 영웅들이 펼치는 이야기입니다.',
}
```

그리고 여기서 아래와 같이 작성하면, '해리포터' 라는 '키' 를 통해 해당 책의 ‘설명’ 을 불러올 수 있다.

```dart
print(bookInfo['해리포터']); // 출력: 옛날 옛날 한 마법학교에 해리포터라는 아이가 있었어요.
```

이처럼, ‘키(key)’와 ‘값(value)’의 쌍으로 데이터를 연결해두는 방식이 바로 맵(Map)이다.

>**[팁&노트]**
Dart나 Java, kotlin 등 에서는 이를 Map이라고 부르고, Swift, Phyton 등에서는 아예 그 구조를 Dictionary라고 부른다. (개인적으로 ‘Dictinary’ 도 직관적이고 좋은 네이밍 이라고 생각한다.)


### **다양한 타입의 값이 섞인 Map 예제**

Map을 정의할 때는 문자, 숫자, 리스트, 클래스 객체까지 다양한 타입의 값을 자유롭게 담을 수 있다. 즉, 하나의 Map 안에 서로 다른 종류의 데이터를 함께 저장이 가능하다.

```dart
//Book 클래스
class Book { // 책 정보를 담는 클래스
  String title;
  String author;

  Book(this.title, this.author);// 생성자를 통해 변수 초기화

  void printInfo() {
    print('책 제목: $title / 저자: $author');
  }
}
```

```dart
void main() { 
  Map<String, dynamic> info = { //dynamic 타입을 사용하여 다양한 타입의 값을 저장할 수 있다.
    'name': '홍길동',                     // 문자열
    'age': 30,                           // 정수
    'isMember': true,                   // 불리언
    'scores': [95, 87, 78],             // 심지어 리스트도 넣을수 있고
    'favoriteBook': Book('호빗', '톨킨')  // 클래스객체도 넣을수 있다
  };

  print(info['name']);               // 출력: 홍길동
  print(info['scores']);            // 출력: [95, 87, 78]
  (info['favoriteBook'] as Book).printInfo(); // 책 제목: 호빗 / 저자: 톨킨
}
```

> **[팁&노트]**
Map을 직접 정의할 때 처음보는 <String, dynamic> 와 같은 코드를 사용했다. 이를 generic(제네릭)이라고 부른다. 이는 "Map의 키가 문자열(String)이고, 값은 다양한 타입(dynamic)을 허용할거야" 라는 일종의 사전 정의이다. 제네릭을 사용하면 어떤 타입이 들어있는지 한눈에 파악할수 있고, 이는 코드의 가독성과, 타입 안정성을 높일수 있는 방법이다.


### Map의 추가, 삭제
Map에서 데이터를 추가하거나 삭제하고 싶을 때는, 키(key)를 기준으로 처리할수 있다.

```dart
var bookInfoMap = { //  Map 정의
    101 : '해리포터', // 책 정보는 숫자(101) 키로 관리
    102 : '반지의제왕',
    103 : '삼국지'
  };

bookInfoMap[104]; = '호빗'; // 새로운 책 정보 추가
print(bookInfoMap); // 출력: {101: 해리포터, 102: 반지의제왕, 103: 삼국지, 104: 호빗}
```

위 코드처럼 "bookInfoMap[104] = '호빗'" 형태로 작성하면, 104라는 새로운 키에 ‘호빗’이라는 값을 추가한다는 의미이다. 만약 기존에 존재하는 값을 변경하고 싶다면 그냥 같은 방식으로 새 값을 대입하면 자동으로 덮어쓰기가 된다.


```dart
bookInfoMap[104] = '호빗'; // 새로운 책 정보 추가
bookInfoMap[104] = '왕좌의게임'; // 104 번 키에 해당하는 값을 변경
print(bookInfoMap); // 출력: {101: 해리포터, 102: 반지의제왕, 103: 삼국지, 104: 왕좌의게임}
```

삭제도 추가만큼 간단하다. Map에서 항목을 삭제하고 싶다면 .remove() 메서드를 사용하면 된다. 삭제할 때는 삭제하고 싶은 항목의 키(key)를 전달하면 해당 데이터가 제거된다.

```dart
var bookInfoMap = {
  101: '해리포터',
  102: '반지의제왕',
  103: '삼국지'
};

bookInfoMap.remove(102); // 102번 키에 해당하는 항목 제거
print(bookInfoMap); // 출력: {101: 해리포터, 103: 삼국지}
```

--- 

## **복잡한 구조**
실제로 우리가 다루는 데이터는 대부분 단순하지 않다. 예를 들어 여러 명의 사용자 정보를 저장한다고 가정해보자. 이럴 때는 우리가 배운것을 전부 활용해서 List 안에 Map이 들어간 형태로 표현할 수 있다. 

```dart
//기본자료형 + 리스트 + 맵 등을 조합한 예제
List<Map<String, dynamic>> users = [ // List 안에 Map이 들어간 형태
  { // 첫번째 사용자 정보
    'name': '홍길동',
    'age': 30,
    'isMember': true,
    'tags': ['개발자', '블로거']
  },
  {// 두번째 사용자 정보
    'name': '이몽룡',
    'age': 25,
    'isMember': false,
    'tags': ['디자이너']
  }
];
```

이렇게 복잡한 구조일지라도 우리가 배운 반복자를 통해 리스트를 순회하고 값을 꺼내볼수 있다. 

```dart
void main() {
  for (var user in users) { // users 리스트를 순회
    print('이름: ${user['name']}'); // user는 Map이므로 키를 통해 값에 접근 
    print('나이: ${user['age']}'); // 나이 정보 출력
    print('회원 여부: ${user['isMember'] ? '회원' : '비회원'}'); // 회원 여부 출력
    
  }
}
```

이처럼 리스트와 맵의 중첩 구조는 실무에서 매우 자주 사용되기 때문에 잘 익혀두는것이 좋다. 예를 들어 API(서버를 통해서 받아오는 데이터)나 DB(데이터베이스)에서 가져온 여러 항목(사용자, 게시글, 주문 등)을 리스트로 담고, 각 항목의 정보를 맵으로 표현하면 반복 출력, 조건 필터링, 데이터 가공 등 여러가지로 활용이 가능하다.

### AI와 함께 학습하세요
>Q. Dart의 List와 Map구조를 활용한 다양한 예시를 제공해줘.

---

### 주요메서드활용
**containsKey() – 특정 키가 존재하는지 확인**

containsKey()는 Map에 특정 키가 존재하는지 확인할 때 사용합니다. 존재하지 않는 키를 실수로 참조하면 오류가 발생할 수 있으므로, 조건문 등에서 자주 활용됩니다. 항상 키 존재 여부를 확인한 후 데이터를 처리하는 습관이 중요합니다.

```dart
void main() {
  var user = {'name': '홍길동', 'age': 30};
  print(user.containsKey('name')); // true
}
```

**containsValue() – 특정 값이 존재하는지 확인**

containsValue()는 Map 안에 특정 값이 존재하는지를 확인합니다. 조건 필터링이나 단순 확인 용도로 유용하게 사용됩니다.

```dart
void main() {
  var user = {'name': '홍길동', 'age': 30};
  print(user.containsValue(30)); // true
}
```

**keys – 모든 키 반환**

keys는 Map에 존재하는 모든 키를 반환합니다. 데이터를 가공하거나, 반복문이나 필터링에 자주 활용됩니다.

```dart
void main() {
  var user = {'name': '홍길동', 'age': 30};
  print(user.keys); // (name, age)
}
```

**values – 모든 값 반환**
keys와 반대로 values는 Map에 저장된 모든 값만을 반환합니다. 

```dart
void main() {
  var user = {'name': '홍길동', 'age': 30};
  print(user.values); // (홍길동, 30)
}
```

---

## Set
사실 앞서 살펴본 List는 순서가 있는 데이터 집합이다. 또한 내부적으로 중복된 값을 허용하는 특징을 가지고있다. 하지만 중복 없이 데이터를 저장하고 싶을 때가 있을 것이다. 예를 들어 어떤 사용자가 이미 등록한 태그, 인증을 위한 아이디, 한번만 가능한 설정값등 이다. 바로 이럴 때 사용하는 자료형이 바로 Set(셋)이다. 즉, Set은 순서를 보장하지 않으며, 중복을 허용하지 않는 컬렉션이다.

```dart
var bookshelf = {'삼국지', '해리포터', '영웅문', '반지의제왕'};
```

겉으로 보기에는 뭐가 다른가 싶지만, 자세히 살펴보자. Set은 { } 와 같이 중괄호 형태로 작성한다.

다른 컬렉션 데이터 타입과 마찬가지로, Set도 add, remove로 자유롭게 데이터를 추가 제거 할 수 있다.

```dart
void main() {
  // Set 정의
  var bookshelf = {'삼국지', '해리포터', '영웅문', '반지의제왕'};

  print(bookshelf);  
  // 출력: {삼국지, 해리포터, 영웅문, 반지의제왕}

  // 요소 추가
  bookshelf.add('호빗');
  print(bookshelf);  
  // 출력: {삼국지, 해리포터, 영웅문, 반지의제왕, 호빗}

  // 요소 제거
  bookshelf.remove('해리포터');
  print(bookshelf);  
  // 출력: {삼국지, 영웅문, 반지의제왕, 호빗}
}
```

Set은 중복을 허용하지 않기 때문에, 만약 중복된 요소가 추가될시 자동으로 무시되는 특징을 가지고 있다.

```dart
// 중복 요소 추가 시 무시됨
bookshelf.add('삼국지');
print(bookshelf);  
// 출력: {삼국지, 해리포터, 영웅문, 반지의제왕, 호빗}  ← 변화 없음
```

List에서 중복된 항목을 제거하고 싶을때 유용하게 활용할수 있다. 예를들어 아래처럼 책의 중복이 허용되는 bookList가 있다고 가정해보자.

```dart
void main() {
  // 중복된 데이터를 포함한 리스트
  // 삼국지가 두 번, 해리포터가 두 번 포함되어 있다.
  var bookList = ['삼국지', '해리포터', '삼국지', '영웅문', '해리포터'];

  print('중복 포함 리스트: $bookList');
  // 출력: 중복 포함 리스트: [삼국지, 해리포터, 삼국지, 영웅문, 해리포터]
}
```

Set의 내장함수인 .from을 사용하여 쉽게 List → Set으로 변환할수 있고, 변환된 Set 형태를 print를 통해 출력해보면 정말 중복이 자동으로 제거되었다는 것을 확인할수 있다. 

```dart
// Set으로 변환하여 중복 제거
var bookSet = Set.from(bookList);

print('중복 제거된 Set: $bookSet');
// 중복 제거된 Set: {삼국지, 해리포터, 영웅문}
```

다시 List로 변환하고 싶다면 .toList() 라는 함수를 사용하면 된다.

```dart
// 다시 List로 변환 (필요시)
var uniqueBookList = bookSet.toList();

print('중복 제거된 리스트: $uniqueBookList');
// 최종 중복 제거된 리스트: [삼국지, 해리포터, 영웅문]
```

### AI와 함께 학습하세요
>Q. dart의 List, Map, Set을 언제 어떻게 사용하면 좋을지 예제를 제공해줘.

---


### 추가로 알아두세요!

**Set의 초기화 주의사항**
Set을 사용할 때 반드시 기억해야 할 중요한 점이 있다. 바로 아래와 같이 중괄호만으로 초기화할 경우, 우리가 의도한 Set이 아닌 Map으로 인식된다는 점이다.

```dart
var myData = { }; //Set 을 만들고 싶었지만, Map으로 인식된다.
```

이 코드는 겉보기엔 Set처럼 보이지만, Dart는 {}만 사용해 선언한 데이터를 기본적으로 Map 타입으로 간주하고 있다. 다소 헷갈릴수 있기 때문에 주의가 필요하다. 실제로 타입을 확인해보면 다음과 같은 결과가 나온다. 

```dart
main(){
  var myData = {}; //의도 : 빈 set 생성
  print(myData is Set); // 논리식으로 확인해본다.
  print(myData.runtimeType); //runtimeType 은 현재 객체의 타입을 출력해준다.
}
```

만약 {}를 사용해 빈 Set을 만들고 싶다면 타입을 명시적으로 지정하면 가능하다.

```dart
//타입 명시
Set<String> mySet = {};
```


**Json구조란?**
Map의 구조는 우리가 '웹' 이나 '앱' 개발에서 가장 자주 접하게 될 JSON 이라고 하는 데이터 구조와도 동일하다. 

```json
{
  'name': '홍길동',
  'age': 30,
  'isStudent': false,
  'skills': ['Dart', 'Flutter', 'JavaScript']
}
```

json 구조는 '웹표준' 포맷이고 가장 많이 쓰이는 데이터 형태이다. 이 구조를 다시 dart로 작성해보자.

```dart
var user = {
  "name": "홍길동",
  "age": 30,
  "isStudent": false,
  "skills": ["Dart", "Flutter", "JavaScript"]
};

print(user["name"]); // 출력: 홍길동
```

>**[팁&노트]**
JSON(JavaScript Object Notation)은 간단한 구조와 쉽게 읽을 수 있는 표현 방식, 그리고 대부분의 프로그래밍 언어에서 원활하게 사용된다는 장점 덕분에, 오늘날 REST API, 데이터 교환, 설정 파일 등 웹과 앱 개발의 표준 포맷으로 자리 잡았다.[^2]

코드를 보면 구조가 거의 동일하다. 이와 같은 json 형태의 데이터는 서버에서 가져온 데이터를 통해 이 데이터를 파싱/가공하여 화면에 표시할때 굉장히 많이 사용하게 될것이다. 당연히 지금부터 친해지는게 좋다.


### ***GPT 에게 물어봅시다***
>Q. “Dart에서 json데이터를 Map구조로 가공하는 방법을 알려줘.”

---

## Copilot 활용 실습

위에서 배운 컬렉션 타입의 기본 문법을 익히고, 데이터를 추가하고 꺼내보는 코드를 직접 작성해보자. 아래의 예제를 참고하여, 책 목록을 관리하는 리스트, 도서 정보를 담는 맵, 과일 목록을 담는 셋을 만들어보자. 책의 이름, 과일이름 등을 자유롭게 추가하고 삭제해보자.


```dart
void main() {
  // 1) List 만들기: 문자열을 저장하는 책 목록 리스트
  var bookList = ['삼국지', '해리포터', '영웅문'];
  print('책 리스트: $bookList');
  print('첫 번째 책: ${bookList[0]}');

  // 책을 하나 추가해보자.
  // bookList.add(...);

  // 책을 하나 삭제해보자.
  // bookList.remove(...);
  //...

  // 2) Map 만들기: 도서 제목과 저자를 키-값으로 저장
  var bookInfo = {
    '삼국지': '나관중',
    '해리포터': 'J.K. 롤링',
    '영웅문': '김용',
  };
  print('도서 정보: $bookInfo');
  print('삼국지 저자: ${bookInfo['삼국지']}');

  // 새로운 책 정보를 자유롭게 추가해보자.
  // bookInfo['호빗'] = ...;
  //...

  // 3) Set 만들기: 중복 없이 저장되는 과일 목록
  var fruitSet = {'사과', '바나나', '사과'}; // 중복은 자동 제거
  print('과일 목록 (Set): $fruitSet');

  // 좋아하는 과일을 자유롭게 추가해보자.
  // fruitSet.add(...);

  // 과일을 제거해보세요.
  // fruitSet.remove(...);
}
```


--- 

[^1] Dennis Ritchie’s Q&A on array indexing : http://cm.bell-labs.com/cm/cs/who/dmr/chist.html


[^2] Wikipedia – JSON https://en.wikipedia.org/wiki/JSON 