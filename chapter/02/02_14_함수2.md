
# 또다른 함수 작성방법

이번 챕터에서는 함수 작성과 호출에 관련된 다양한 방법과 팁을 소개한다. 하지만 여기서 소개하는 모든 방법을 꼭 사용할 필요는 없다. 상황에 따라 필요한 부분을 하나씩 익혀 나가면 충분하다. 함수를 작성하는 방식은 상황에 따라 탑레벨(글로벌) 함수, 익명 함수, 클래스 함수, 멤버 함수, 람다 등 여러 개념이 있다.

## **탑레벨(글로벌)함수**

우리가 흔히 함수라고 하면 클래스 안에 작성된 메서드를 떠올리기 쉽지만, 함수는 반드시 클래스 안에 정의할 필요는 없다. 클래스 밖에, 즉 파일의 최상단에 정의된 함수를 우리는 탑레벨 함수(Top-level Function) 라고 부른다. 이런 탑레벨 함수들은 특정 클래스에 소속되지 않으며, 어디서든 자유롭게 호출할 수 있는 장점이있다. 때문에 글로벌 함수(Global Function) 라고 부르기도한다.

**“top-level 함수는 언제쓰면 좋을까?”**

탑레벨 함수를 사용하면 코드 구조를 보다 단순하고 깔끔하게 유지할 수 있다. 예를 들어, 앱 전체에서 공통으로 사용하는 유틸리티 함수나 앱 설정 관련 전역 함수 이런 것들을 탑레벨 함수로 작성하면 재사용성과 유지보수성이 크게 향상된다.

아래 처럼 작성된 탑레벨 함수는 클래스와 전혀 상관없이 작성되고 필요할때 자유롭게 호출할수 있다. 

```dart
// 클래스 외부에 정의된 탑레벨 함수
// 로그 메시지를 출력하는 함수
void logInfo(String message) {
  final timestamp = DateTime.now(); // 현재 시간을 가져옵니다.
  print('[$timestamp] $message'); // 메시지와 함께 출력합니다.
}

// 일반 클래스 정의
class User {
  String name;

  User(this.name);

  void greet() {
    print('Hello, $name');
    logInfo('Greeted $name'); // 클래스 외부의 함수 호출도 가능하다.
  }
}

void main() {
  var user = User('Alice');
  user.greet(); // logInfo이 함께 호출됨
  logInfo('Greeted ${user.name}'); // 여기서도 탑레벨 함수도 자유롭게 호출 OK.
}
```

이처럼 탑레벨 함수는 클래스와 무관하게 파일 최상단에 작성되며, 객체를 생성하지 않고도 자유롭게 호출할 수 있는 함수이다. 그래서 전역적으로 자주 사용할 유틸리티 기능을 만들 때 자주 활용된다. 예를 들어 로그 출력, 날짜 포맷 변환, 공통 설정 함수 등이 이에 해당된다. 탑레벨 함수는 매우 편리하지만 이 편리함 때문에 무분별하게 사용하면 오히려 프로젝트 구조가 복잡해질 수 있습니다. 따라서 반드시 전역적으로 사용할 필요가 있는 경우에만 사용하는 것이 좋습니다.[^1]



## **정적메서드**
정적메서드는 객체를 생성하지 않고, 클래스 네임을 통해 직접 호출할 수 있는 메서드이다. Dart에서는 static 키워드를 사용해 정적메서드를 정의한다.

```dart
class MyClass {
  // 정적 메서드 정의
  static bool isAvailable() {//	클래스 인스턴스를 만들지 않고, 호출이 가능하다.
    return true;
  }
}
```

```dart
void main() {
  bool result = MyClass.isAvailable();//클래스 이름을 통해 바로 호출할 수 있다.
  print(result); // 출력: true
}
```


static은 클래스 인스턴스를 만들지 않고 사용할 수 있도록 메모리상의 ‘공유’ 를 위한 특정 공간을 활용하는 키워드이다. 변수, 함수등에 활용될수 있으며, 앱의 어디서든 사용되는 공통된 기능이나 데이터를 클래스 전체에서 함께 사용할 때 사용한다.

### AI와 함께 학습하세요
>Q. dart의 함수에 대해서 공부중이야. static 함수와 글로벌 함수의 용도는 비슷한거 같은데, 어떤 차이가 있는걸까?


## **익명함수**
익명 함수(Anonymous Function)는 말 그대로 이름이 없다는 점만 제외하면, 일반 함수와 구조가 거의 같다. () 안에 매개변수를 정의하고, {} 안에 실행할 코드를 작성한다.

```dart
// 문자열을 출력하는 익명 함수를 변수에 할당
var printMessage = (String message) { //이름이 없는 함수
  print('📢 $message');
};

// 사용
void main() {
  printMessage('Hello, Dart!'); //호출할때는 변수명으로 호출
}
```

익명 함수는 변수에 할당할 수도 있고, 다른 함수의 인자로 직접 전달해서 사용할 수도 있다. 대표적인 예가 바로 리스트의 .forEach() 메서드이다. 아래 예제를 살펴보자.

```dart
void main() {
  var fruits = ['apple', 'banana', 'cherry'];

  // 익명 함수를 forEach에 전달
  fruits.forEach(
    // 순차적으로 각 과일을 출력하는 익명 함수
    (fruit) {
      print('과일: $fruit');
    }
  );
}
```

**“어떻게 이런일이 가능한가요?”** 
Dart에서는 함수도 객체처럼 다뤄지기 때문에, 함수를 변수에 할당하거나, 다른 함수의 매개변수로 전달하는 것이 가능하다. 이러한 유연성 덕분에 익명 함수는 매우 자주 사용되며 forEach() 메서드의 정의를 보면 다음과 같이 되어 있다.

```dart
void forEach(void Function(E element) action);
```

즉, forEach는 매개변수로 ‘함수’를 인자로 받을 수 있도록 정의된 메서드이다. (정확히는, Function 타입의 값을 인자로 받도록 설계되어 있습니다.) 그래서 위 예제에서 전달하는 익명 함수 “(fruit){print('과일: $fruit');}” 도 하나의 값처럼 전달되어, forEach 내부에서 사용될 수 있는 것입니다. 

함수는 아래와 같이 Function 타입을 직접 명시해서 사용할 수도 있다. 익명 함수 자체가 하나의 값처럼 변수에 저장되는 형태이다. 

```dart
Function printMessage = (String message) {
  print('📢 $message');
};
```

## **람다, 화살표함수**

Dart에서는 익명함수 자체를 좀 더 축약할수 있다. 이러한 축약형 익명 함수를 화살표 함수(Arrow Function) 또는 람다식이라고 부른다. 

위에서 살펴봤듯이, 일반적인 익명 함수는 아래와 같이 작성된다.

```dart
var greet = (String name) { // 익명 함수
  print('Hello, $name!');
};

greet('Dart');
```

이 함수는 이름이 없지만, greet라는 변수에 할당되어, 일반 함수처럼 사용할 수 있다. 이 함수를 화살표 구문을 통해 작성해보자.

```dart
var greet = (String name) => print('Hello, $name!');
greet('Dart');
```

'=>' 를 통해 간단하게 함수를 표현할수 있기 때문에, 유용하게 자주 쓰이는 방법이다. 간결하고, 군더더기 없는 축약형 문법 그 자체이며, 이 축약형 문법을 우리는 흔히 람다(lambda) 또는 화살표 함수라고 부른다.


> **[팁&노트]**
단일 표현식(간단한)만을 포함하는 함수에서는 화살표 구문(=>)을 적극 사용하여, 코드를 더 간결하게 유지하는 것이 좋다. [^2]


아래는 익명함수를 사용해서, 리스트를 반복하고 출력하는 예제이다. 

```dart
var names = ['John', 'Lisa', 'Mike'];

names.forEach(
  // 이 부분이 반복된다.
  // 익명 함수로 각 이름을 출력
  (name) {
    print('Hello, $name!');
  }
);
```

화살표 함수로 표현하면 기존 코드에 비해 코드가 매우 깔끔하고 간결해진다.

```dart
var names = ['John', 'Lisa', 'Mike'];
names.forEach((name) => print('Hello, $name!'));
```

람다식은 간단한 표현식에 매우 유용하게 사용된다. 아직 배우지 않았지만 map, where 등의 컬렉션 메서드와 함께 사용하면, 리스트나 컬렉션을 간단하게 변환하거나 필터링할 수 있다. (조금 어려워 보이지만 일단은 보는것 만으로 충분하다.)

```dart
var numbers = [1, 2, 3];
var doubled = numbers.map((n) => n * 2).toList();
print(doubled); 
```

```dart
var items = [10, 15, 20, 25];
var filtered = items.where((item) => item > 15).toList();
print(filtered);
```

하지만 이러한 축약식은 만능이 아니다. 간결하기 때문에 축약식을 남발하면 분석이 오히려 어려워질수 있다. 

```dart
final result = users
    //아래의 코드는 굉장히 깔끔하고, 스마트해 보이지만
		//각종 축약식과 연산자들로 인해 한참을 들여다봐야 파악이 가능하다.
    .where((u) => u.isActive && u.age > 18) 
    .map((u) => u.name.toUpperCase())
    .reduce((a, b) => a.length > b.length ? a : b);
```

위 코드를 축약식을 쓰지 않고 작성한다면, 작성 코드는 길어지지만 훨씬 더 이해가 쉬워진다.(코드를 짧게 작성하는 것이 항상 좋은 것은 아니다.)

```dart
// 조건을 만족하는 사용자 필터링
bool isEligible(User user) {
  return user.isActive && user.age > 18;
}

// 사용자 이름을 대문자로 변환
String toUpperCaseName(User user) {
  return user.name.toUpperCase();
}

// 이름 길이를 비교해서 더 긴 이름 선택
String selectLongerName(String a, String b) {
  return a.length > b.length ? a : b;
}

// 최종 처리
final result = users
    .where(isEligible)
    .map(toUpperCaseName)
    .reduce(selectLongerName);
```

람다식은 간결하고 짧지만, 피로를 유발할수 있기 때문에 상황에 맞는 유연한 코드 작성이 필요하다.

---

## Copilot 활용 실습

Dart에서는 함수를 다양한 방식으로 작성할 수 있다. 각각의 특징을 파악하고, Copilot이 제안하는 코드로 빈칸을 채워가며 다양한 함수 스타일을 익혀보자.

```dart
// 1) 클래스 밖에 정의된 전역 함수 (탑레벨 함수)
void logInfo(/* String message */) {
  // 현재 시간과 메시지를 함께 출력
  // final timestamp = DateTime.now();
  // print(...);
}

// 2) 클래스 내부의 정적 메서드
class MathUtil {
  // 두 수를 더하는 정적 메서드를 작성
  // static int sum(int a, int b) {
  //   return ...;
  // }
}

// 3) 익명 함수를 변수에 할당하고 호출
void useAnonymousFunction() {
  // 문자열을 받아 출력하는 익명 함수를 작성
  // var printMessage = (String msg) {
  //   print('📢 $msg');
  // };

  // printMessage('Hello, Dart!');
}

// 4) 화살표 함수로 축약 표현
void useArrowFunction() {
  // 이름을 받아 인사하는 화살표 함수 작성
  // var greet = (String name) => print('Hello, $name!');
  // greet('Flutter');
}


// 각 함수와 메서드를 호출하는 main 함수 작성
void main() {
  // 탑레벨 함수 사용
  logInfo('앱 시작됨');

  // 정적 메서드 호출
  //...

  // 익명 함수 사용
  //...

  // 화살표 함수 사용
  //...

}
```


---

[^1] [Effective Dart: Design - Member-level vs. Top-level](https://dart.dev/guides/language/effective-dart/design#prefer-putting-functionality-into-classes-if-it-logically-fits-there)



[^2][Effective Dart: Style] https://dart.dev/effective-dart/style#do-use–for-simple-members