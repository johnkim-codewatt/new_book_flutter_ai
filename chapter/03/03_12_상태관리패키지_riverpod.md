# Riverpod
Riverpodì€ ë¹„êµì  ìµœì‹ ì˜ ìƒíƒœê´€ë¦¬ íŒ¨í‚¤ì§€ ì´ë‹¤. ê°„ë‹¨í•œ ì‚¬ìš©ë²•ê³¼ ë‹¬ë¦¬ ê°•ë ¥í•œ ìƒíƒœê´€ë¦¬ ë°©ë²•ì„ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ì¸ê¸°ê°€ ë†’ì•„ì§€ê³  ìˆëŠ” ì¶”ì„¸ì´ë‹¤. Provider ì´ì™¸ì— ìµœì‹ ì˜ ìƒíƒœê´€ë¦¬ íŒ¨í‚¤ì§€ë¥¼ ì´ìš©í•˜ê³  ì‹¶ë‹¤ë©´ Riverpodì€  ìµœê³ ì˜ ì†”ë£¨ì…˜ì´ ë ìˆ˜ ìˆë‹¤. Riverpodì€ ì²˜ìŒë¶€í„° Providerì˜ í•œê³„ë¥¼ ê·¹ë³µí•˜ê³ ì ì„¤ê³„ëœ ìƒˆë¡œìš´ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë©°, Providerì˜ ì² í•™ì„ ê³„ìŠ¹í•˜ë©´ì„œë„, ë” ë‚˜ì€ ìœ ì—°ì„±ê³¼ ì•ˆì •ì„±ì„ ì œê³µí•˜ê¸° ìœ„í•œ êµ¬ì¡°ë¡œ ì¬ì„¤ê³„ë˜ì—ˆë‹¤.

ê²°êµ­ ì—¬ëŸ¬ê°€ì§€ ìƒíƒœê´€ë¦¬ íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª©ì ì€, ì–´ë–¤ íŒ¨í‚¤ì§€ë¥¼ ì„ íƒí•˜ë“  ë³¸ì§ˆì ìœ¼ë¡œëŠ” ë™ì¼í• ê²ƒì´ë‹¤.(ìƒíƒœê´€ë¦¬ë¥¼ ì˜í•˜ê¸° ìœ„í•¨ì´ë‹¤.) ì ì‹œ ê·¸ ë‚´ìš©ì„ ë“¤ì—¬ë‹¤ ë³´ì. ì²«ë²ˆì§¸, Flutter ì•±ì—ì„œ ê°€ì¥ í•µì‹¬ì ì¸ ê³¼ì œ ì¤‘ í•˜ë‚˜ì¸ ìƒíƒœ ê´€ë¦¬ë¥¼ ë³´ë‹¤ ì›í™œí•˜ê²Œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ë‹¤. ìš°ë¦¬ëŠ” Providerë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ê°„í¸í•˜ê²Œ ìƒíƒœê´€ë¦¬ í•˜ëŠ” ë°©ë²•ì„ ë°°ì› ë‹¤. ë‘˜ì§¸, UI ì½”ë“œì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(ìƒíƒœ ë³€í™”ì— ë”°ë¥¸ ì²˜ë¦¬ ë¡œì§)ì„ ëª…í™•íˆ ë¶„ë¦¬í•˜ëŠ” êµ¬ì¡°ë¥¼ ë§Œë“œëŠ” ê²ƒì´ë‹¤. ì´ëŠ” ë‹¨ìˆœíˆ ì½”ë“œ ì •ë¦¬ë¥¼ ìœ„í•œ ê°œë…ì´ ì•„ë‹ˆë¼, ì‹¤ì œ í”„ë¡œì íŠ¸ ê·œëª¨ê°€ ì»¤ì§€ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì¤‘ìš” í•´ì§ˆìˆ˜ë¡ ê¸°ëŠ¥ë³„ ì±…ì„ì„ ë‚˜ëˆ„ê³  ê´€ë¦¬í•˜ëŠ” êµ¬ì¡°ë¥¼ ë§Œë“¤ê¸° ìœ„í•¨ì´ë‹¤. êµ³ì´ 'í´ë¦°ì½”ë“œ', 'í´ë¦°ì•„í‚¤í…ì²˜' ì™€ ê°™ì€ ê³¨ì¹˜ì•„í”ˆ ì´ë¡ ì„ ë”°ë¥´ì§€ ì•Šë”ë¼ë„, UIì™€ ìƒíƒœë¡œì§ì„ ë¶„ë¦¬í•˜ëŠ” ê²ƒ ìì²´ë§Œìœ¼ë¡œë„ í° ì˜ë¯¸ê°€ ìˆë‹¤. ì´ì œ Riverpodì„ í†µí•´ì„œ ìƒíƒœê´€ë¦¬ì™€ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬ë¥¼ ì–´ë–»ê²Œ í•´ì•¼í• ì§€ ìì„¸íˆ ì‚´í´ë³´ì.

>**[íŒ&ë…¸íŠ¸]**
í´ë¦°ì•„í‚¤í…ì²˜ëŠ”, ë¡œë²„íŠ¸ ë§ˆí‹´(Uncle Bob)ì´ ì œì•ˆí•œ ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ê³„ ì›ì¹™ìœ¼ë¡œ, UIì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ë°ì´í„° ê³„ì¸µì„ ëª…í™•íˆ ë¶„ë¦¬í•˜ì—¬ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ê³  í™•ì¥ ê°€ëŠ¥í•˜ê²Œ ë§Œë“œëŠ” êµ¬ì¡°ë¥¼ ë§í•œë‹¤. ì´ëŠ” ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì´ í¬ê²Œ í–¥ìƒì‹œì¼œì¤€ë‹¤.[^2] 



**íŒ¨í‚¤ì§€ì¶”ê°€**
https://pub.dev/packages/riverpod
https://pub.dev/packages/flutter_riverpod

ì•„ë˜ì˜ ë‚´ìš©ì€ flutter_riverpodì„ ì‚¬ìš©í•œë‹¤.

```dart
dependencies:
  flutter_riverpod: ^2.6.1
```

ìš°ë¦¬ì—ê²Œ ì¹œìˆ™í•œ ì¹´ìš´í„° ì˜ˆì œë¥¼ í†µí•´ ë‚´ìš©ì„ ì‚´í´ë³´ì. Riverpodì€ ê¸°ë³¸ì ìœ¼ë¡œ Providerì˜ ì‚¬ìš©ê³¼ ë¹„ìŠ·í•œì ì´ ë§ë‹¤.

**ì „ì²´ì†ŒìŠ¤**

```dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';

// ìƒíƒœë¥¼ ì „ì—­ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ê¸€ë¡œë²Œ ë³€ìˆ˜ë¡œ ì„ ì–¸í•˜ê³ 
// StateProvider ê°„ë‹¨í•œ ë‹¨ì¼ ìƒíƒœì •ë³´ë¥¼ ì²˜ë¦¬í•˜ê¸°ì— ì¢‹ë‹¤.
final counterProvider = StateProvider<int>((ref) => 0);

// ì•± ì§„ì…ì ì—ì„œ ProviderScope ì„¤ì •
void main() {
  runApp(
	  ProviderScope( //Scopeë¥¼ ì„¤ì •í•œë‹¤.
		  child: MyApp()
	  )
  );
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: CounterPage(),
    );
  }
}

// ìƒíƒœë¥¼ ì‚¬ìš©í•˜ëŠ” ìœ„ì ¯
class CounterPage extends ConsumerWidget {
  const CounterPage({super.key});

  // ì œê³µë˜ëŠ” WidgetRef ref ë¥¼ í†µí•´ ìƒíƒœì •ë³´ë¥¼ ì½ì–´ì˜¬ìˆ˜ ìˆë‹¤.
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    //ì „ì—­ìœ¼ë¡œ ì„ ì–¸ëœ counterProvider ë¥¼ êµ¬ë…í•œë‹¤.
    final count = ref.watch(counterProvider); // ìƒíƒœ ì½ê¸°

    return Scaffold(
      appBar: AppBar(title: const Text('Riverpod ì¹´ìš´í„°')),
      body: Center(
        child: Text(
          '$count', //ìƒíƒœì •ë³´ë¥¼ ì‚¬ìš©í•œë‹¤.
          style: const TextStyle(fontSize: 40),
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: () { //ë²„íŠ¼ì„ ëˆŒë €ì„ë•Œ ìƒíƒœ ê°’ì¦ê°€ ì½”ë“œ
          ref.read(counterProvider.notifier).state++; // ì§ì ‘ ìƒíƒœì— ì ‘ê·¼í•´ì„œ ê°’ ë³€ê²½
        },
        child: const Icon(Icons.add),
      ),
    );
  }
}

```

ê¸°ì¡´ì˜ Providerì˜ ì‚¬ìš©ì— ìµìˆ™í•˜ë‹¤ë©´, íŠ¹ë³„íˆ ì–´ë ¤ìš´ ì½”ë“œëŠ” ì—†ì„ê²ƒì´ë‹¤. ìš°ì„  riverpodì—ì„œ providerë¥¼ í†µí•´ ìƒíƒœê°’ì„ ì œê³µí•˜ë ¤ë©´ ProviderScopeë¥¼ ì‘ì„±í•´ì•¼í•œë‹¤. ProviderScopeëŠ” ì‰½ê²Œ ë§í•´ ìƒíƒœê°’ì„ ê³µìœ í•  ì˜ì—­ì„ ì§€ì •í•˜ëŠ” ì½”ë“œì´ë‹¤.

**ProviderScope**
ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì•± ì§„ì…ì ì—ì„œ ProviderScopeë¥¼ ì„¤ì •í•˜ë©´ëœë‹¤. ì•± ì „ì—­ì—ì„œ ì–´ë””ì„œë“  ìƒíƒœì •ë³´ì— ì ‘ê·¼í•˜ê¸° ìœ„í•¨ì´ë‹¤. Providerì˜ ìœ„ì ¯íŠ¸ë¦¬ì— ê¸°ë°˜í•œ ìƒíƒœê´€ë¦¬ êµ¬ì¡°ì—ì„œ ë²—ì–´ë‚˜, ì§€ì •ëœ ì˜ì—­ì•ˆì—ì„œ ì˜¨ì „íˆ ìƒíƒœê´€ë¦¬ì™€ ì‚¬ìš©ì—ë§Œ ì§‘ì¤‘í• ìˆ˜ ìˆë‹¤.

```dart
void main() {
  runApp(
    ProviderScope( // ì•± ì „ì²´ë¥¼ ê°ì‹¸ëŠ” í˜•íƒœ = ì „ì—­ì‚¬ìš©ì„¤ì •
      child: MyApp(),
    ),
  );
}
```

**StateProvider**

ìœ„ì—ì„œ ì ì‹œ ì‚´í´ë³¸, StateProviderëŠ” ê°„ë‹¨í•œ ê°’(int, String, bool ë“±)ì„ ìƒíƒœì •ë³´ë¡œì¨ ê´€ë¦¬í•  ë•Œ ì‚¬ìš©í•˜ê¸° ì í•©í•œ Providerì´ë‹¤.
Flutter ìœ„ì ¯ íŠ¸ë¦¬ì˜ ìƒí•˜ êµ¬ì¡°ì™€ ë¬´ê´€í•˜ê²Œ ì „ì—­ìœ¼ë¡œ ìƒíƒœë¥¼ ì •ì˜í•  ìˆ˜ ìˆê¸°ë•Œë¬¸ì— ë§¤ìš° í¸ë¦¬í•˜ë‹¤.



```dart
final counterProvider = StateProvider<int>((ref) => 0); //ê³„ì¸µêµ¬ì¡°ì™€ ë¬´ê´€í•˜ê²Œ ê¸€ë¡œë²Œ ë³€ìˆ˜ë¡œ ìƒíƒœë¥¼ ë“±ë¡
```

>ë“±ë¡ëœ ìƒíƒœëŠ” ì–´ë””ë¡œ ê°€ëŠ”ê±¸ê¹Œìš”?, Riverpodì€ ë‚´ë¶€ì ìœ¼ë¡œ í•´ë‹¹ ìƒíƒœë¥¼ Provider Pool(ìƒíƒœ ì €ì¥ì†Œì™€ ê°™ì€ ê°œë…)ì— ë“±ë¡í•˜ì—¬ ê´€ë¦¬í•©ë‹ˆë‹¤. í•„ìš”í• ë•Œë§ˆë‹¤ êº¼ë‚´ì“°ë©´ ë˜ëŠ”ê²ƒì´ì§€ìš”. 


**read & watch**
ìƒíƒœê³µìœ ë¥¼ ìœ„í•œ ì˜ì—­ì„¤ì •, ë“±ë¡ì„ ë§ˆì³¤ìœ¼ë‹ˆ ì´ì œ ì‚¬ìš©í•  ì°¨ë¡€ì´ë‹¤. Riverpodì€ ê°’ì„ ì½ì–´ì˜¤ê¸° ìœ„í•´ ë‘ê°€ì§€ ë°©ë²•ì„ ì œê³µí•œë‹¤. read ì™€ watchì´ë‹¤. ëˆˆì¹˜ì±„ê² ì§€ë§Œ, ì´ë‘˜ì˜ ì˜ë¯¸ëŠ” providerì˜ ê·¸ê²ƒê³¼ ë™ì¼í•˜ë‹¤.


<table>
  <thead>
    <tr>
      <th><strong>í•­ëª©</strong></th>
      <th><code>ref.watch()</code></th>
      <th><code>ref.read()</code></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>ì—­í• </strong></td>
      <td>ìƒíƒœë¥¼ <strong>â€œêµ¬ë…â€</strong> (ê°ì‹œ)</td>
      <td>ìƒíƒœë¥¼ <strong>â€œì½ê¸°ë§Œâ€</strong> í•¨</td>
    </tr>
    <tr>
      <td><strong>ë°˜ì‘ì„±</strong></td>
      <td>ìƒíƒœê°€ ë°”ë€Œë©´ ìœ„ì ¯ì´ <strong>ìë™ ë¦¬ë¹Œë“œë¨</strong></td>
      <td>ìƒíƒœê°€ ë°”ë€Œì–´ë„ ìœ„ì ¯ì€ <strong>ë¦¬ë¹Œë“œ ì•ˆë¨</strong></td>
    </tr>
    <tr>
      <td><strong>ì‚¬ìš© ìœ„ì¹˜</strong></td>
      <td><code>build()</code> ë“± <strong>UI ë Œë”ë§ì—ì„œ ì‚¬ìš©</strong></td>
      <td><strong>onPressed</strong>, <strong>initState</strong> ë“± <strong>ë¹„UI ì´ë²¤íŠ¸ì—ì„œ ì‚¬ìš©</strong></td>
    </tr>
    <tr>
      <td><strong>ì˜ˆì‹œ</strong></td>
      <td><code>final count = ref.watch(counterProvider)</code></td>
      <td><code>ref.read(counterProvider.notifier).state++</code></td>
    </tr>
  </tbody>
</table>

ref.watch()ëŠ” êµ¬ë…(ê°ì‹œ)ì˜ ì˜ë¯¸ì´ë‹¤. í•´ë‹¹ ìƒíƒœë¥¼ êµ¬ë…í•˜ê³ , êµ¬ë…ì€ ìƒíƒœê°€ ë³€ê²½ë˜ë©´ í•´ë‹¹ ê°’ì„ ì‚¬ìš©ì¤‘ì¸ ìœ„ì ¯ì´ ê°±ì‹  ì²˜ë¦¬ëœë‹¤. (ê·¸ë ‡ê¸° ë•Œë¬¸ì— build ì•ˆì— ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤.)

```dart
 @override
  Widget build(BuildContext context, WidgetRef ref) {
    final count = ref.watch(counterProvider); // ìƒíƒœ êµ¬ë…
		//...
```

ë°˜ë©´ ref.read()ëŠ” ë‹¨ìˆœíˆ ê°’ì„ ì½ì„ë•Œ ì‚¬ìš©í•˜ë©´ëœë‹¤.

```dart
ref.read(counterProvider.notifier).state //ref.readë¥¼ í†µí•´ stateì— ì ‘ê·¼í•œë‹¤.
```

---

**ë°˜ë“œì‹œ êµ¬ë¶„í•´ì„œ ì¨ì•¼ í•˜ëŠ” watchì™€ read**

ref.watch()ì™€ ref.read()ì˜ ì°¨ì´ë¥¼ ì œëŒ€ë¡œ ì´í•´í•˜ì§€ ëª»í•˜ê³  ìƒí™©ì— ë§ì§€ ì•Šê²Œ ì‚¬ìš©í•˜ë©´, ë¶ˆí•„ìš”í•œ ìœ„ì ¯ ë¦¬ë¹Œë“œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ì²˜ìŒì—” ì•„ë¬´ëŸ° ë¬¸ì œ ì—†ì´ ì‘ë™í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì—¬ë„, ì•± ê·œëª¨ê°€ ì»¤ì§ˆìˆ˜ë¡ ì„±ëŠ¥ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì£¼ì˜í•´ì•¼í•œë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ ì•„ë˜ì˜ ì½”ë“œë¥¼ ì‚´í´ë³´ì.

```dart
ElevatedButton(
  onPressed: () {
    // ìƒíƒœ ë³€í™”ë¥¼ ê°ì‹œí•  í•„ìš”ê°€ ì—†ìŒì—ë„ ë¶ˆêµ¬í•˜ê³  watchë¥¼ ì‚¬ìš©í•¨
    final counter = ref.watch(counterProvider);
    print('í˜„ì¬ ê°’: $counter');
  },
  child: Text('ì¦ê°€'),
)
```

ê²‰ë³´ê¸°ì—ëŠ” ì•„ë¬´ ë¬¸ì œê°€ ì—†ì–´ ë³´ì´ë©°, ë™ì‘ë„ ë¬¸ì œì—†ë‹¤. í•˜ì§€ë§Œ ì´ ë²„íŠ¼ì€ ìƒíƒœ ë³€í™”ì— ë”°ë¼ì„œ í™”ë©´ì„ ë‹¤ì‹œ ê·¸ë¦´ í•„ìš”ê°€ ì „í˜€ ì—†ì–´ ë³´ì¸ë‹¤. ê·¸ëŸ¼ì—ë„ watchë¥¼ ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì—, ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ìë™ì ìœ¼ë¡œ ì´ ë²„íŠ¼ì„ í¬í•¨í•œ ìœ„ì ¯ ì „ì²´ê°€ ë¶ˆí•„ìš”í•˜ê²Œ ê°±ì‹  ëœë‹¤. ì´ëŸ° ë¬¸ì œê°€ ë¹„ë™ê¸°ì²˜ë¦¬ë¥¼ ìœ„í•œ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œë„ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

```dart
void someAsyncFunction(WidgetRef ref) async {
  final value = ref.watch(myFutureProvider); // ë¹„ë™ê¸° ë¡œì§ ë‚´ë¶€ì— watch ì‚¬ìš©
  // ...
}
```

ë¹„ë™ê¸° í•¨ìˆ˜ ë¡œì§ ë‚´ë¶€ì—ëŠ” êµ³ì´ ìƒíƒœë¥¼ êµ¬ë…í•  í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸ì—, readë¡œ ì¶©ë¶„íˆ ì˜ ë™ì‘í•œë‹¤. í•´ë‹¹ ì½”ë“œëŠ” ì˜ë„ì¹˜ ì•Šì€ ê°±ì‹ ì„ ìœ ë°œí•˜ê³ , ì´ëŠ” ì•±ì˜ ì„±ëŠ¥ ì €í•˜ë¡œ ì´ì–´ì§„ë‹¤. ë°˜ë“œì‹œ read, watchë¥¼ ìƒí™©ì— ë§ê²Œ ì¨ì•¼í•˜ëŠ” ì´ìœ ì´ë‹¤.

---

## **ConsumerWidget(StatelessWidget)**

```dart
// ìƒíƒœë¥¼ ì‚¬ìš©í•˜ëŠ” ìœ„ì ¯
class CounterPage extends ConsumerWidget { //ConsumerWidgetë¥¼ ìƒì†í•œë‹¤.
  const CounterPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final count = ref.watch(counterProvider);
    //...
  }
//...

}

```

ìœ„ ì½”ë“œë¥¼ ìì„¸íˆ ë“¤ì—¬ë‹¤ë³´ë©´, ë‚¯ì„  êµ¬ë¬¸ì´ ëˆˆì— ë„ì—ˆì„ ê²ƒì´ë‹¤. ë°”ë¡œ ConsumerWidgetì´ë‹¤. ë°˜ë“œì‹œ ìƒì†í•´ì•¼ í•˜ëŠ” í•„ìˆ˜ ìš”ì†ŒëŠ” ì•„ë‹ˆì§€ë§Œ, ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ì—ì„œ í¸ë¦¬ì„±ê³¼ ëª…í™•í•œ ìƒíƒœê´€ë¦¬ë¥¼ ìœ„í•´ ìì£¼ í™œìš©ëœë‹¤.

build ë©”ì„œë“œë¥¼ ìì„¸íˆ ë³´ë©´, WidgetRef refë¼ëŠ” ë§¤ê°œë³€ìˆ˜ê°€ ì¡´ì¬í•œë‹¤. ì´ refê°€ ë°”ë¡œ  ConsumerWidgetì„ ìƒì†í•  ë•Œ buildë¥¼ í†µí•´ ìë™ìœ¼ë¡œ ì œê³µë˜ëŠ” ë§¤ê°œë³€ìˆ˜ì´ë‹¤. ì´ë¥¼ í†µí•´ Providerì˜ ìƒíƒœë¥¼ êµ¬ë…í•˜ê±°ë‚˜ ì½ëŠ” ì‘ì—…ì„ ì†ì‰½ê²Œ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤. 

```dart
class CounterPage extends ConsumerWidget {
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final count = ref.watch(counterProvider);
    return Text('$count');
  }
}
```

>**[íŒ&ë…¸íŠ¸]** 
Riverpodì€ ìœ„ì ¯íŠ¸ë¦¬êµ¬ì¡°ì— ì˜ì¡´í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, refë§Œ ìˆë‹¤ë©´ ì–´ë””ì„œë“  ì•ˆì „í•˜ê²Œ ìƒíƒœë¥¼ ì½ê±°ë‚˜ ì¡°ì‘í•  ìˆ˜ ìˆë‹¤. ì´ê²ƒì€ ê¸°ì¡´ì˜ BuildContextì— ì˜ì¡´í•˜ëŠ” Providerë³´ë‹¤ ë” ìœ ì—°í•œ ìƒíƒœê´€ë¦¬ ë°©ë²•ì´ë‹¤. [^1]

---

## **ConsumerStatefulWidget**
ê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ê°€ ë°°ìš´ StatelessWidgetê³¼, StatefulWidgetì€ ì–´ë””ë¡œ ê°„ê²ƒì¼ê¹Œ? ì‚¬ì‹¤ ìœ„ì—ì„œ ë°°ìš´ ConsumerWidgetì€ StatelessWidgetë¥¼ ê¸°ë°˜í•˜ëŠ” ìœ„ì ¯ì´ë‹¤. ì´ëŠ” ìì²´ì ìœ¼ë¡œ ìƒíƒœ ê°±ì‹  ì²˜ë¦¬ë¥¼ í• ìˆ˜ ì—†ë‹¤ëŠ” ëœ»ì´ë‹¤. í•˜ì§€ë§Œ ì‹¤ë¬´ì—ì„œëŠ” ë³µì¡í•œ ìƒíƒœê´€ë¦¬ì™€ í™”ë©´ê°±ì‹ ì²˜ë¦¬ê°€ í•„ìš”í•œ ê²½ìš°ê°€ ìˆë‹¤. 

ì•„ë˜ì˜ ì½”ë“œë¥¼ ì‚´í´ë³´ì. ì „ì—­ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ìƒíƒœì •ë³´ì¸ counterProviderì™€, í•˜ìœ„ ìœ„ì ¯ ìì²´ì—ì„œë§Œ ì‚¬ìš©í•  isLoading ì´ë¼ëŠ” ìƒíƒœì •ë³´ë¥¼ ë³µí•©ì ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” í•´ì•¼í•˜ëŠ” ìƒí™©ì´ë‹¤.

```dart
/// ì „ì—­ ìƒíƒœ: ì •ìˆ˜í˜• ì¹´ìš´í„°ë¥¼ ì €ì¥í•˜ëŠ” Provider
final counterProvider = StateProvider<int>((ref) => 0);
```

```dart
class MyPage extends ConsumerStatefulWidget {// ConsumerStatefulWidgetë¥¼ ìƒì†
  const MyPage({Key? key}) : super(key: key);

  @override
  ConsumerState<MyPage> createState() => _MyPageState();
}

class _MyPageState extends ConsumerState<MyPage> {
  bool isLoading = false; // ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ìì‹ ë§Œì˜ ìƒíƒœì •ë³´

  @override
  Widget build(BuildContext context) {
    final count = ref.watch(counterProvider); // ì „ì—­ìƒíƒœ êµ¬ë…

    return Column(
      children: [
        if (isLoading) CircularProgressIndicator(), //ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©ë˜ëŠ” ìƒíƒœ isLoading ì‚¬ìš©
        Text('ì¹´ìš´í„°: $count'),
        ElevatedButton(
          onPressed: () async {
            setState(() => isLoading = true); 
            await Future.delayed(Duration(seconds: 1));
            ref.read(counterProvider.notifier).state++;
            setState(() => isLoading = false); //setStateë¥¼ í†µí•´ ìŠ¤ìŠ¤ë¡œ í™”ë©´ì„ ê°±ì‹ 
          },
          child: Text('ì¦ê°€'),
        ),
      ],
    );
  }
}
```

ìœ„ ì½”ë“œì²˜ëŸ¼ ë³µí•©ì ì¸ ìƒíƒœê´€ë¦¬ê°€ í•„ìš”í•˜ë‹¤ë©´, ConsumerStatefulWidget ë¥¼ ìƒì†í•˜ë©´ëœë‹¤. isLoadingì€ í•´ë‹¹ ìœ„ì ¯ ì•ˆì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ë¡œì»¬ ìƒíƒœì´ë©°, ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œë§Œ ìƒíƒœê°€ ë³€ê²½ë˜ë¯€ë¡œ, ì „ì—­ìœ¼ë¡œ ê´€ë¦¬í•  í•„ìš”ê°€ ì—†ë‹¤. ë”°ë¼ì„œ StatefulWidgetì„ ì‚¬ìš©í•˜ë“¯ì´, setState()ë¡œ ì²˜ë¦¬í•˜ë©´ ëœë‹¤.
ì „ì—­ìƒíƒœëŠ” ref.watch()ë¥¼ í†µí•´ counterProviderë¥¼ êµ¬ë…ì²˜ë¦¬í•˜ê³ , ìƒíƒœ ë³€ê²½ ì‹œ build()ê°€ ìë™ìœ¼ë¡œ ë‹¤ì‹œ í˜¸ì¶œë˜ë„ë¡ ì‘ì„±í•˜ë©´ ëœë‹¤.


### AIì™€ í•¨ê»˜ í•™ìŠµí•˜ì„¸ìš”
>Q. dartì—ì„œ riverpod íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©ì¤‘ì¸ë°, ì™œ ConsumerWidget(StatelessWidget)ì€ buildì˜ ë§¤ê°œë³€ìˆ˜ë¡œ refë¥¼ ì‚¬ìš©í•˜ê³ , ConsumerStatefulWidget(StatefulWidget) ì—ì„œëŠ” buildê°€ ì•„ë‹Œ ì „ì—­ refë¥¼ ì‚¬ìš©í•˜ì§€? ì¼ê´€ì„±ì´ ì—†ì–´ë³´ì´ëŠ”ë°?


ì´ë ‡ê²Œ ë³µí•©ì ì¸ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ë©´ ìƒí™©ì— ë§ëŠ” ìœ ì—°í•œ ëŒ€ì²˜ê°€ ê°€ëŠ¥í•´ì§„ë‹¤. ì „ì—­ ìƒíƒœ(Provider)ì™€ ë¡œì»¬ ìƒíƒœ(setState)ë¥¼ í•„ìš”ì— ë”°ë¼ ì¡°í•©í•¨ìœ¼ë¡œì¨, ê° ìƒíƒœì˜ ì‚¬ìš© ë²”ìœ„ì™€ ë¡œì§ì„ ë¶„ë¦¬í• ìˆ˜ ìˆê³ , ê³¼ë„í•œ ì „ì—­í™”ë‚˜ ë¶ˆí•„ìš”í•œ ë³µì¡ì„±ì„ í”¼í•  ìˆ˜ ìˆë‹¤.

---



## **Consumer**
ConsumerWidgetì„ ì‚¬ìš©í•˜ì§€ ì•Šê³ ë„ Riverpodì„ í™œìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆë‹¤. ë°”ë¡œ Consumer ìœ„ì ¯ì„ ì‚¬ìš©í•˜ë©´ëœë‹¤. ì‚¬ìš©ë°©ë²•ì€ Providerì™€ ìœ ì‚¬í•˜ê³ , íŠ¹ì • ë¶€ë¶„ë§Œ ìƒíƒœ ë³€í™”ì— ë°˜ì‘í•˜ë„ë¡ ê°ì‹¸ëŠ” ìš©ë„ë¡œ ì‚¬ìš©ëœë‹¤. ì¦‰, ìœ„ì ¯ íŠ¸ë¦¬ ì¤‘ ë¦¬ë¹Œë“œê°€ í•„ìš”í•œ ë¶€ë¶„ë§Œ ë”°ë¡œ ê°ì‹¸ì„œ ìµœì í™”í•  ìˆ˜ ìˆëŠ” ìœ ì—°í•œ ë„êµ¬ì¸ ê²ƒì´ë‹¤.

```dart
class HomePage extends StatelessWidget { //StatelessWidget ë¥¼ ìƒì†í•œë‹¤.
  @override
  Widget build(BuildContext context) {
    return Column(
      children: [
        Text('ê³ ì • í…ìŠ¤íŠ¸'), // ì´ ë¶€ë¶„ì€ ë¦¬ë¹Œë“œë˜ì§€ ì•ŠìŒ
        Consumer(
          builder: (context, ref, child) { //Consumerì˜ buildë¥¼ í†µí•´ refì— ì ‘ê·¼í• ìˆ˜ìˆë‹¤.
            final name = ref.watch(userProvider);
            return Text('ì‚¬ìš©ì: $name');
          },
        )
      ],
    );
  }
}
```

ìœ„ ì˜ˆì œì²˜ëŸ¼ Consumerë¥¼ ì‚¬ìš©í•˜ë©´ refë¥¼ ë¶€ë¶„ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ë¶ˆí•„ìš”í•œ ë¦¬ë¹Œë“œë¥¼ ë°©ì§€í•˜ê³  í•„ìš”í•œ ë¶€ë¶„ë§Œ ë°˜ì‘í˜•ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë§¤ìš° í•©ë¦¬ì ì¸ ì½”ë“œ êµ¬ì¡°ê°€ ëœë‹¤. ì´ëŸ¬í•œ ë°©ì‹ì€ ì„±ëŠ¥ ìµœì í™”ëŠ” ë¬¼ë¡ ì´ê³ , ì½”ë“œ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ ì¸¡ë©´ì—ì„œë„ ìœ ë¦¬í•˜ë‹¤. ë”°ë¼ì„œ ìœ„ì ¯ ì „ì²´ë¥¼ ConsumerWidgetìœ¼ë¡œ ê°ì‹¸ê¸° ë¶€ë‹´ìŠ¤ëŸ¬ìš¸ ë•Œ, ë˜ëŠ” ìƒíƒœ ë³€ê²½ì´ ì¼ì–´ë‚˜ëŠ” ì¼ë¶€ ìš”ì†Œë§Œ ê°±ì‹ ì‹œí‚¤ê³  ì‹¶ì„ ë•Œ ConsumerëŠ” ì¢‹ì€ ì„ íƒì´ ë  ìˆ˜ ìˆì„ê²ƒì´ë‹¤.

---

## **StateNotifierProvider**
StateNotifierProviderëŠ” ë‹¨ìˆœíˆ ê°’ì„ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ, ìƒíƒœë¥¼ â€˜ê´€ë¦¬â€™ í•˜ëŠ” ë¡œì§ì— ì´ˆì ì„ ë§ì¶œ ë•Œ ì‚¬ìš©í•˜ëŠ” Provider ì´ë‹¤. ê¸°ì¡´ì˜ StateProviderëŠ” int, String, bool ë“± ê°„ë‹¨í•œ ê°’ì„ ì €ì¥í•˜ê³  ì „ë‹¬í•˜ëŠ”ë° ì í•©í•˜ì§€ë§Œ, ìƒíƒœ ë³€ê²½ì— ëŒ€í•œ ë¡œì§ì´ í•„ìš”í•œ ê²½ìš° í•œê³„ê°€ ìˆë‹¤. ì´ëŸ´ ë•Œ StateNotifierProviderë¥¼ ì‚¬ìš©í•˜ë©´ ë” ìœ ì—°í•˜ê³  ëª…í™•í•œ ìƒíƒœ ê´€ë¦¬ë¥¼ í• ìˆ˜ ìˆë‹¤.

```dart
class CounterNotifier extends StateNotifier<int> { //StateNotifierë¥¼ ìƒì†í•œë‹¤.
  CounterNotifier() : super(0); // superë¥¼ í†µí•´ ì´ˆê¸°ê°’(0)ì„ ì „ë‹¬í•œë‹¤.

  void increment() => state++; //ê°’ ì¦ê°€ë¥¼ ë‹´ë‹¹í•˜ëŠ” ê¸°ëŠ¥
}
```

ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ë¡œì§ì€ StateNotifier<T> í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ êµ¬í˜„í•˜ë©°, <T>(ì œë„¤ë¦­)ì—ëŠ” ê´€ë¦¬í•  ìƒíƒœì˜ íƒ€ì…ì„ ì§€ì •í•œë‹¤. (int, List, Map, í˜¹ì€ ì‚¬ìš©ì ì •ì˜ í´ë˜ìŠ¤ ë“±) ìœ„ í´ë˜ìŠ¤ëŠ” ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ë¡œì§ì„ ë‚´ë¶€ì— í¬í•¨í•œ ì¼ì¢…ì˜ ìƒíƒœ ì»¨íŠ¸ë¡¤ëŸ¬ ì—­í• ì„ ìˆ˜í–‰í•œë‹¤. stateëŠ” ìš°ë¦¬ê°€ ì •ì˜í•œ ë³€ìˆ˜ëŠ” ì•„ë‹ˆì§€ë§Œ, ë‚´ë¶€ì ìœ¼ë¡œ ê°€ì§€ê³  ìˆëŠ” í˜„ì¬ ìƒíƒœê°’ì„ ì˜ë¯¸í•˜ë©°, ë§Œì•½ ì´ë¥¼ ë³€ê²½í•˜ë©´ ìë™ìœ¼ë¡œ UIê°€ ê°±ì‹ ëœë‹¤.

ì´ì œ StateNotifierProvider ë¥¼ ë“±ë¡í•  ì°¨ë¡€ì´ë‹¤.

```dart
final counterProvider = StateNotifierProvider<CounterNotifier, int>(
  (ref) => CounterNotifier(), //ìƒíƒœì •ë³´ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì§€ì •í•œë‹¤.
);
```
 
 ì•„ë˜ì˜ ì „ì²´ ì½”ë“œë¥¼ ì‚´í´ë³´ì.

```dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';

// ìƒíƒœ ì»¨íŠ¸ë¡¤ëŸ¬
class CounterNotifier extends StateNotifier<int>{ //StateNotifierë¥¼ ìƒì†í•œë‹¤.
  CounterNotifier() : super(0); // ì´ˆê¸°ê°’ 0

  void increment() => state++; //ì¦ê°€ì‹œí‚¤ê±°ë‚˜
  void decrement() => state--; //ê°ì†Œì‹œí‚¤ê±°ë‚˜
}

// Provider ì •ì˜
final counterProvider =
    StateNotifierProvider<CounterNotifier, int>((ref) => CounterNotifier());

void main() {
  runApp(ProviderScope(child: MyApp()));//ProviderScope ì •ì˜
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(home: CounterPage());
  }
}

class CounterPage extends ConsumerWidget {//ConsumerWidget ìƒì†
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final count = ref.watch(counterProvider); // ìƒíƒœ êµ¬ë…

    return Scaffold(
      appBar: AppBar(title: Text('StateNotifier ì¹´ìš´í„°')),
      body: Center(child: Text('$count', style: TextStyle(fontSize: 40))),
      floatingActionButton: Column(
        mainAxisAlignment: MainAxisAlignment.end,
        children: [
          FloatingActionButton(
            onPressed: () => ref.read(counterProvider.notifier).increment(), // ìƒíƒœ ë³€ê²½ ë¡œì§
            child: Icon(Icons.add),
          ),
          SizedBox(height: 10),
          FloatingActionButton(
            onPressed: () =>
                ref.read(counterProvider.notifier).decrement(), // ìƒíƒœ ë³€ê²½ ë¡œì§
            child: Icon(Icons.remove),
          ),
        ],
      ),
    );
  }
}
```

CounterNotifierëŠ” ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ë¡œì§ì„ ë‚´ë¶€ì— í¬í•¨í•œ ì¼ì¢…ì˜ ìƒíƒœ ì»¨íŠ¸ë¡¤ëŸ¬ì´ë‹¤. ì´ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” state ê°’ì„ ì§ì ‘ ê´€ë¦¬í•˜ë©°, ì™¸ë¶€ ìœ„ì ¯ì—ì„œëŠ” refë¥¼ í†µí•´ í•´ë‹¹ ìƒíƒœë¥¼ ì½ê±°ë‚˜ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ UIì‘ì„±ì— ê´€ë ¨ëœ ì½”ë“œì™€, ìƒíƒœ, ë¡œì§ì— ê´€ë ¨ëœ ì½”ë“œê°€ ì¢€ ë” ëª…í™•í•˜ê²Œ êµ¬ë¶„ëœê²ƒì„ í™•ì¸í• ìˆ˜ ìˆë‹¤. (ìš°ë¦¬ê°€ í•˜ëŠ” ëŒ€ë¶€ë¶„ì˜ ì•¡ì…˜ì€, ìœ ì§€ë³´ìˆ˜ì™€ ê°€ë…ì„±ì„ ìœ„í•¨ì´ë‹¤.)



### AIì™€ í•¨ê»˜ í•™ìŠµí•˜ì„¸ìš”
>Q. ë°˜ì‘í˜• í”„ë¡œê·¸ë˜ë°ì´ë€ ë¬´ì—‡ì„ ì˜ë¯¸í•˜ëŠ”ê°€?


---

## Copilotì„ í†µí•´ ì‹¤ìŠµí•´ë³´ì„¸ìš”

Riverpodì—ì„œ **ìƒíƒœë¥¼ ì§ì ‘ ì œì–´í•˜ëŠ” êµ¬ì¡°**ë¥¼ ë°°ìš°ê³ ,
Copilotì˜ ì œì•ˆì„ í™œìš©í•´ increment / decrement ê¸°ëŠ¥ì„ ì™„ì„±í•´ë³´ì„¸ìš”.

```dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';

// ìƒíƒœë¥¼ ë‹¤ë£¨ëŠ” Notifier í´ë˜ìŠ¤ ì •ì˜
// 1. StateNotifier<int>ë¥¼ ìƒì†í•˜ì„¸ìš”.
class CounterNotifier extends //... {
  CounterNotifier() : super(0);

  // 2. ê°’ì„ 1 ì¦ê°€ì‹œí‚¤ëŠ” ë©”ì„œë“œë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”.
  void increment() {
    //...
  }

  // 3. ê°’ì„ 1 ê°ì†Œì‹œí‚¤ëŠ” ë©”ì„œë“œë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”.
  void decrement() {
    // ...
  }
}
```

```dart
// Provider ë“±ë¡í•˜ê¸°
final counterProvider =
    // CounterNotifierì™€ intë¥¼ ì—°ê²°í•˜ëŠ” StateNotifierProviderë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”.
    StateNotifierProvider<//...>((ref){//...});
```

```dart
// ì•±ì˜ ì‹œì‘ì : ProviderScopeë¡œ ê°ì‹¸ê¸°
void main() {
  runApp(
    ProviderScope(
      child: MyApp(),
    ),
  );
}
```

```dart
// ì•± UI ì‘ì„±
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(home: CounterPage());
  }
}
```

```dart
// ìƒíƒœë¥¼ ì‚¬ìš©í•˜ëŠ” í™”ë©´: ConsumerWidget í™œìš©
class CounterPage extends ConsumerWidget {
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    // í˜„ì¬ count ìƒíƒœë¥¼ êµ¬ë…í•´ë³´ì„¸ìš”.
    final count = //...

    return Scaffold(
      appBar: AppBar(title: Text('ğŸ“¦ Riverpod ì‹¤ìŠµ')),
      body: Center(
        child: Text(
          'í˜„ì¬ ê°’: $count', //countë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
          style: TextStyle(fontSize: 32),
        ),
      ),
      floatingActionButton: Column(
        mainAxisAlignment: MainAxisAlignment.end,
        children: [
          // ì¦ê°€ ë²„íŠ¼
          FloatingActionButton(
            onPressed: () {
              // ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ê°’ì´ ì¦ê°€í•˜ëŠ” ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
              // ...
            },
            child: Icon(Icons.add),
          ),
          SizedBox(height: 12),
          // ê°ì†Œ ë²„íŠ¼
          FloatingActionButton(
            onPressed: () {
              // ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ê°’ì´ ê°ì†Œí•˜ëŠ” ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
              // ...
            },
            child: Icon(Icons.remove),
          ),
        ],
      ),
    );
  }
}
```

---

[^1] Riverpod : https://riverpod.dev/docs/from_provider/provider_vs_riverpod

[^2] Robert C. Martin(â€œUncle Bobâ€) ì €ì„œ Clean Architecture: A Craftsmanâ€™s Guide to Software Structure and Design